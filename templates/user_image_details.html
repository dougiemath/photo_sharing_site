{% extends "base.html" %}

{% block content %}

<title>{{ image.title }}</title>

<div class="row image-details-container">
    <div class="col-sm-8 style">
        <img src=" {{ image.featured_image.url }}" style="width: 100%;">
    </div>
    <div class="col-sm-4 ">
        <h2 class="image-details-title">{{ image.title }}</h2>
        <hr class="image-details-divder">
        <div class="draft-status p-2 text-center">
            {% if image.status == 1 %}
            <p class="text-success">This image has been published to the live feed.</p>
            {% else %}
            <p class="text-warning">This image is still a 'draft' and is visible only to you.</p>
            {% endif %}
        </div>
        <hr class="image-details-divder">
        <p class="image-details-content">{{ image.description }}</p>
        <p class="image-details-content"><small>Uploaded on {{ image.created_on }}</small></p>
        <hr class="image-details-divder">
        <p class="image-details-content">Image tags:
            {% for tag in image.tags.all %}
            <a href="{% url 'image:tag' tag.slug %}" class="tag-links">{{tag.name}}</a>,
            {% endfor %}
        </p>
        <hr class="image-details-divder">
        <p class="image-details-content">Options:
            <div class="row justify-content-center">
                <div class="col-6 d-flex justify-content-center">
                    <a class="editing-buttons" href="{% url 'image:update' image.pk %}"> Edit Image</a>
                </div>
                <div class="col-6 d-flex justify-content-center">
                    <a class="editing-buttons" href="{% url 'image:delete' image.pk %}">Delete Image</a>
                </div>
            </div>
    </div>
</div>

<div class="container-fluid  upload-a-photo" style=" width: 95%;">

    <div class="comment-title col-sm">
        <h2>Comments</h2>
    </div>
    {% if user.is_authenticated  %}
    <div class="comments-details pl-3">

        {% if not image.comments.all %}
        <strong>There are no comments yet. Be the first by clicking below!</strong>
        {% else %}
        {% for comment in image.comments.all  %}
        <br>
        <div class="comment-body">
            <strong>{{ comment.body }}</strong>
            <p class="font-italic"><small>Comment added on {{ comment.created_on }} by {{ user.username }}</small></p>
        </div>
        {% endfor %}
        {% endif %}

    </div>
    <div class="comment-link col-sm mb-3 mt-4"><a class="editing-buttons"
            href="{% url 'image:add_comment' image.pk %}">Add a
            comment</a></div>
    {% else %}
    <p class="pl-3">You must be logged in to view comments</p>
    {% endif %}
</div>

<br>

{% endblock %}